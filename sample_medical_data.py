#!/usr/bin/env python3
"""
Add sample medical content to demonstrate the RAG system
This adds Hebrew oncology content to supplement the scraped data
"""

import json
import os
from document_processor import DocumentProcessor
from vector_store import VectorStore

# Sample oncology content in Hebrew
SAMPLE_CONTENT = [
    {
        "title": "כימותרפיה - טיפול בתרופות נגד סרטן",
        "url": "https://www.assuta.co.il/services/oncology/chemotherapy/",
        "content": """כימותרפיה היא אחת משיטות הטיפול העיקריות בסרטן. הטיפול מבוסס על מתן תרופות מיוחדות שמטרתן להרוס תאי סרטן או למנוע מהם להתרבות.

איך עובדת כימותרפיה?
תרופות הכימותרפיה פועלות על תאים שמתחלקים במהירות, כמו תאי הסרטן. הן יכולות להרוס תאי סרטן בדרכים שונות:
• עצירת חלוקת התאים
• מניעת יצירת DNA חדש
• הפרעה לתפקוד התא

סוגי כימותרפיה:
1. כימותרפיה סיסטמית - התרופות מגיעות לכל הגוף דרך מחזור הדם
2. כימותרפיה מקומית - הטיפול ניתן באזור מסוים בגוף
3. כימותרפיה לפני הניתוח - להקטנת הגידול
4. כימותרפיה לאחר הניתוח - למניעת חזרת המחלה

תופעות לוואי אפשריות:
• עייפות
• בחילות והקאות
• נשירת שיער
• דלקת בפה
• ירידה בערכי הדם
• זיהומים

הטיפול באסותא:
באסותא המרכזים הרפואיים מתמחים בכימותרפיה מתקדמת עם:
- ציוד מתקדם לטיפול
- צוות רפואי מנוסה
- מעקב צמוד ותמיכה
- טיפול אישי לכל מטופל""",
        "hebrew_content": """כימותרפיה היא אחת משיטות הטיפול העיקריות בסרטן. הטיפול מבוסס על מתן תרופות מיוחדות שמטרתן להרוס תאי סרטן או למנוע מהם להתרבות.

איך עובדת כימותרפיה?
תרופות הכימותרפיה פועלות על תאים שמתחלקים במהירות, כמו תאי הסרטן. הן יכולות להרוס תאי סרטן בדרכים שונות:
• עצירת חלוקת התאים
• מניעת יצירת DNA חדש
• הפרעה לתפקוד התא

סוגי כימותרפיה:
1. כימותרפיה סיסטמית - התרופות מגיעות לכל הגוף דרך מחזור הדם
2. כימותרפיה מקומית - הטיפול ניתן באזור מסוים בגוף
3. כימותרפיה לפני הניתוח - להקטנת הגידול
4. כימותרפיה לאחר הניתוח - למניעת חזרת המחלה

תופעות לוואי אפשריות:
• עייפות
• בחילות והקאות
• נשירת שיער
• דלקת בפה
• ירידה בערכי הדם
• זיהומים

הטיפול באסותא:
באסותא המרכזים הרפואיים מתמחים בכימותרפיה מתקדמת עם:
- ציוד מתקדם לטיפול
- צוות רפואי מנוסה
- מעקב צמוד ותמיכה
- טיפול אישי לכל מטופל"""
    },
    {
        "title": "טיפול קרינתי - רדיותרפיה באונקולוגיה",
        "url": "https://www.assuta.co.il/services/oncology/radiotherapy/",
        "content": """טיפול קרינתי (רדיותרפיה) הוא אחת משיטות הטיפול המרכזיות בסרטן. הטיפול משתמש בקרינה בעלת אנרגיה גבוהה כדי להרוס תאי סרטן או לעצור את התפתחותם.

איך פועל הטיפול הקרינתי?
הקרינה פוגעת ב-DNA של תאי הסרטן, מונעת מהם להתחלק ולהתרבות. תאי הסרטן רגישים יותר לקרינה מתאים בריאים, מה שמאפשר טיפול יעיל.

סוגי טיפול קרינתי:
1. קרינה חיצונית (EBRT) - מכשיר מחוץ לגוף מכוון קרינה אל הגידול
2. ברכיתרפיה - מקורות קרינה מוחדרים לגוף קרוב לגידול
3. רדיותרפיה סטריאוטקטית - טיפול מדויק בגדלים קטנים

תחומי טיפול:
• סרטן השד
• סרטן הריאות  
• סרטן המוח
• סרטן הערמונית
• סרטן המעי הגס

תופעות לוואי:
• עייפות
• שינויים בעור באזור הטיפול
• בחילות (בטיפול באזור הבטן)
• קושי בבליעה (בטיפול בצוואר)

הטיפול באסותא:
• מאיצים לינאריים מתקדמים
• תכנון טיפול תלת-מימדי
• צוות מקצועי ומנוסה
• מעקב רפואי צמוד
• טיפול אישי ומותאם""",
        "hebrew_content": """טיפול קרינתי (רדיותרפיה) הוא אחת משיטות הטיפול המרכזיות בסרטן. הטיפול משתמש בקרינה בעלת אנרגיה גבוהה כדי להרוס תאי סרטן או לעצור את התפתחותם.

איך פועל הטיפול הקרינתי?
הקרינה פוגעת ב-DNA של תאי הסרטן, מונעת מהם להתחלק ולהתרבות. תאי הסרטן רגישים יותר לקרינה מתאים בריאים, מה שמאפשר טיפול יעיל.

סוגי טיפול קרינתי:
1. קרינה חיצונית (EBRT) - מכשיר מחוץ לגוף מכוון קרינה אל הגידול
2. ברכיתרפיה - מקורות קרינה מוחדרים לגוף קרוב לגידול
3. רדיותרפיה סטריאוטקטית - טיפול מדויק בגדלים קטנים

תחומי טיפול:
• סרטן השד
• סרטן הריאות  
• סרטן המוח
• סרטן הערמונית
• סרטן המעי הגס

תופעות לוואי:
• עייפות
• שינויים בעור באזור הטיפול
• בחילות (בטיפול באזור הבטן)
• קושי בבליעה (בטיפול בצוואר)

הטיפול באסותא:
• מאיצים לינאריים מתקדמים
• תכנון טיפול תלת-מימדי
• צוות מקצועי ומנוסה
• מעקב רפואי צמוד
• טיפול אישי ומותאם"""
    },
    {
        "title": "טיפול בסרטן השד באסותא",
        "url": "https://www.assuta.co.il/services/oncology/breast_cancer/",
        "content": """סרטן השד הוא אחד מסוגי הסרטן השכיחים בנשים. באסותא מתמחים בטיפול מקיף ומתקדם בסרטן השד עם גישה רב-תחומית.

שלבי האבחון:
1. בדיקה גופנית והיסטוריה רפואית
2. בדיקות דימות - ממוגרפיה, אולטרסאונד, MRI
3. ביופסיה לאישור האבחון
4. בדיקות גנטיות ומולקולריות
5. קביעת שלב המחלה (Staging)

אפשרויות טיפול:
• ניתוח - כריתה חלקית או מלאה של השד
• כימותרפיה - לפני או אחרי הניתוח
• טיפול קרינתי - להשמדת תאים נותרים
• טיפול הורמונלי - לסרטן רגיש להורמונים
• טיפול מכוון (Targeted therapy)
• אימונותרפיה

סוגי ניתוחים:
1. כריתה חלקית (Lumpectomy) - הסרת הגידול עם רקמה בריאה מסביב
2. כריתת שד (Mastectomy) - הסרת כל השד
3. ביופסיית בלוטות לימפה 
4. ניתוח שחזור השד

הצוות הרב-תחומי באסותא:
• מנתחים אונקולוגים
• אונקולוגים קליניים  
• רדיולוגים
• פתולוגים
• אחיות מומחיות
• עובדים סוציאליים

מעקב ותמיכה:
- בדיקות מעקב סדירות
- ייעוץ גנטי במידת הצורך
- תמיכה נפשית וחברתית
- שיקום ופיזיותרפיה
- קבוצות תמיכה""",
        "hebrew_content": """סרטן השד הוא אחד מסוגי הסרטן השכיחים בנשים. באסותא מתמחים בטיפול מקיף ומתקדם בסרטן השד עם גישה רב-תחומית.

שלבי האבחון:
1. בדיקה גופנית והיסטוריה רפואית
2. בדיקות דימות - ממוגרפיה, אולטרסאונד, MRI
3. ביופסיה לאישור האבחון
4. בדיקות גנטיות ומולקולריות
5. קביעת שלב המחלה (Staging)

אפשרויות טיפול:
• ניתוח - כריתה חלקית או מלאה של השד
• כימותרפיה - לפני או אחרי הניתוח
• טיפול קרינתי - להשמדת תאים נותרים
• טיפול הורמונלי - לסרטן רגיש להורמונים
• טיפול מכוון (Targeted therapy)
• אימונותרפיה

סוגי ניתוחים:
1. כריתה חלקית (Lumpectomy) - הסרת הגידול עם רקמה בריאה מסביב
2. כריתת שד (Mastectomy) - הסרת כל השד
3. ביופסיית בלוטות לימפה 
4. ניתוח שחזור השד

הצוות הרב-תחומי באסותא:
• מנתחים אונקולוגים
• אונקולוגים קליניים  
• רדיולוגים
• פתולוגים
• אחיות מומחיות
• עובדים סוציאליים

מעקב ותמיכה:
- בדיקות מעקב סדירות
- ייעוץ גנטי במידת הצורך
- תמיכה נפשית וחברתית
- שיקום ופיזיותרפיה
- קבוצות תמיכה"""
    }
]

def add_sample_data():
    # Load existing scraped data
    scraped_file = "scraped_data/scraped_oncology_data.json"
    if os.path.exists(scraped_file):
        with open(scraped_file, 'r', encoding='utf-8') as f:
            existing_data = json.load(f)
    else:
        existing_data = []
    
    # Add sample content
    updated_data = existing_data + SAMPLE_CONTENT
    
    # Save updated data
    with open(scraped_file, 'w', encoding='utf-8') as f:
        json.dump(updated_data, f, ensure_ascii=False, indent=2)
    
    print(f"Added {len(SAMPLE_CONTENT)} sample documents")
    print(f"Total documents: {len(updated_data)}")
    
    # Reprocess and rebuild vector store
    print("Reprocessing documents...")
    processor = DocumentProcessor()
    chunks = processor.process_documents(scraped_file)
    
    print("Rebuilding vector store...")
    vector_store = VectorStore()
    vector_store.clear_collection()
    vector_store.add_documents(chunks)
    
    print("Done! The system now has better content.")

if __name__ == "__main__":
    add_sample_data()